---
layout: post
title: "面试模拟"
date: 2025-10-10
category: 秋招
---

### **面试场景模拟：荣耀影像效果调优及评测工程师（一面）**

### **面试模拟回答**

**面试官：** “那我们正式开始。首先，能请你用三到五分钟的时间，简单介绍一下你自己吗？请侧重于你认为与我们‘影像效果调优及评测工程师’岗位最相关的部分。”

**我 :**
“面试官您好，我叫，是来自XXX大学的应届研究生，研究方向是色彩科学 。

* **在实践方面**，我曾在TCL做过4个月的画質算法实习生。主要工作是为他们的显示器产品建立一套完整的颜色管理流程，核心是负责色域映射算法的研究与实现，在底层为他们的显示画质做一个改善。

* **在项目方面**，我曾协助导师做过一个关于显示设备的色彩自适应调节项目。在这个项目中我们提出了一套在有限的屏幕亮度下，通过算法调节图像色彩的方式，来解决高亮环境光下屏幕可视性下降的问题。这个项目最终申请了发明专利，并将项目成果交付给了OPPO。
 
* **在专业技能方面**，我熟练掌握色彩科学、图像处理还有ISP等专业知识，并能熟练使用C++开发语言，以及Matlab和Unity等开发平台。”


**面试官：** “好的，谢谢你的介绍。我们来深入聊聊你在TCL的实习项目...你提到独立负责色彩测量并构建3DLUT模型，能详细讲讲这个过程吗？比如你用了什么设备，遇到了哪些挑战？”

**我:**
“好的。这项工作的目标是对显示器进行一个设备特征化。

它的意思就是说将设备相关的色彩空间给映射到设备无关色彩空间中，比如CIEXYZ。因为不同显示设备他们的显色能力会有不同程度的差异，因此我们评估对比不同显示设备特性或者做一些算法操作时，我们首先需要将他们给映射到一个统一的设备无关空间中，比如CIEXYZ或者CIELAB色彩空间。来确保后续的算法或测试操作都是在与设备无关的色度值下进行，这和ISP中的CCM校正比较很类似。

**过程与设备**：在这个过程中我是在每台显示器上生成了有五百多个色块， 然后使用公司提供的色度计测量每个色块的色度值， 然后记录下这些色块的rgb以及对应的色度值数据。 然后再使用这些记录的数据，通过3DLUT（三维查找表）的方式为每台设备进行设备特征化建模，将设备相关的驱动值（如RGB）转换到设备无关的CIEXYZ色彩空间。

> 3DLUT就是一个3维查找表，类似于一个字典，通过将测量的输入输出数据填充到这个查找表中。当我们想要查找某一个输入时，就可以在查找表中查找是否存在这样一个输入节点，如果存在就可以直接输出他所对应的一个输出，如果不存在可以通过当前输入点他所在邻域所对应的八个邻接点进行插值获取。插值的话有好几种选择比如最临近插值、三线性插值或者四面体插值等

**面试官：** 遇到的挑战

一个难点在于，我一开始是尝试使用传统的GOG（Gamma-Offset-Gain）模型进行特征化建模，但在TCL和海信的显示器上验证时，发现最大色差ΔE高达10左右，效果很差。经过分析查阅原论文，发现GOG模型是适用于传统的CRT显示器，对于现在的液晶显示器的光电转换没有办法很好的模拟。

>后来这里我也是验证了一下，通过测量数据拟合发现他们公司显示器的光电转换函数并不是呈现一个完美的Gamma曲线形状，在高亮区域呈现一个平滑过渡的一个形状，在中低亮度是Gamma形状的，也就是一个类似S形状。因传统的GOG模型是假定的显示器的...都是Gamma曲线形状所以自然就导致最后的结果不太准确

为了解决这个问题，我转而采用3DLUT的建模方式，这种方式最大优点就是简单、准确，但是对样本点数据量比较高，这里我是手动重新测量大量色块，但最终效果很理想，所有设备的色差都降到了1以内。

**面试官**：讲一下色域映射

好的，色域映射主要是为了解决不同显示设备之间色域大小不匹配的问题。比如说我想将一个广色域的图像再现到小色域显示设备中时，由于色域大小不匹配此时就会导致超出目标设备色域的色彩发生裁剪，进而导致再现的图像出现细节丢失或者色调偏移。

这其实和Tone Mapping很类似，Tone mapping是为了解决亮度上的不匹配的问题，而Gamut Mapping是为了解决色域上的不匹配问题

另外色域映射在ISP中处理Raw图数据的时候也应该用到这个技术，因为拍摄到的Raw图色域一般都是要比传统的标准色域要大，所以在CCM校正模块，就需要这样一个技术来将Raw色域映射到目标色域，不过目前ISP中是没有考虑这个问题的，一般就是直接将超出sRGB色域的色彩给裁剪到设备色域内

**面试官：** “这个项目里另一个我们很感兴趣的点，是你为色域映射算法设计了一套主观评测方案。你是如何从零开始设计这个方案来保证其科学性的？”

**我:**
“是的。在调研并复现了多种色域映射算法后，为了客观地评估它们的效果，我是根据论文以及我们自己实验室的一个实验流程设计了一套主观评测方案。

首先是环境设置，要在全黑条件下，排除环境光的一个影响。

然后是实验人员的选择，首先需要通过色异常检测排除掉色弱或者色盲人员对实验的影响，人数不用太多一般设置在10-20人之内就可以了。不过一般实际可能并找不到这么多人，也是可以稍微少搞一点人

然后是具体实验内容的设计，这里在显示器中间放测试图像的原图，然后原图的两侧方式不同的算法映射后的图像，然后让实验人员选择这两个图像与原图相比那个更符合他们的喜好然后点击。这里评价标准一般分为两个维度，一个是图像细节，另一个是色彩喜好性

最后是实验分析，当对所有算法测试完成之后，就可以列一个表格，其中记录每个算法相对于其他算法被选出的次数，然后统计其总得分，通过比较分数了解不同算法之间的效果差异

**面试官：** “好的，我们再看看你那个关于显示设备自适应调节的项目...能具体讲讲你是如何建模人眼在高亮环境下的感知色域的吗？这项工作最终申请了专利，它的核心创新点是什么？”

**我 ：**
“恩，好的。我们这个项目是在有限的屏幕亮度下，通过调节图像的亮度和色彩，来改善屏幕可视性下降的问题。

因为我们目的是如何将高亮环境下的屏幕色彩尽可能的保持与标准环境下屏幕色彩一致。
所以整个问题我们可以建模成一个色彩再现问题，即将标准环境下的屏幕图像色彩，尽可能保持不变的，给再现到户外高亮环境下的屏幕色域中（目标色域）。

这个色彩再现过程我们是使用的色域映射技术。

首先需要进行人眼对于屏幕的色觉感知建模。对于目标色域，也就是人眼在户外真实感知到的屏幕色彩范围，我们认为它会受到两个核心因素的影响：屏幕自身的发光，以及环境光在屏幕上的漫反射光。我们将这两部分的光进行叠加，就得到了目标色域的边界。对于源色域这里我们是直接采用的屏幕的自身色域，即不考虑环境光照的一个影响

* **核心创新与专利**：在确定了源色域和目标色域后，我们通过色域映射算法，将标准图像的色彩补偿性地映射到目标色域中。考虑到人眼对亮度和色调的变化比较敏感，我们采用了能同时保持亮度和色调不变的压缩方式，来保证映射前后色彩的视觉一致性


**解释一下为什么可视性下降**

主要原因是由于户外强光的影响，导致此时人眼的适应白点强度大幅度变高。在这样较高的一个白点下，屏幕的色彩范围在人眼看起来就相对的被压缩了，体现到图像上就是变暗变淡。

所以说在这个问题中，我们就将受到白点影响的色域进行建模

> 当然也有一些其他原因，比如说屏幕自发光叠加环境光之后，会导致最终反射到人眼的色彩偏色以及变淡

**这个项目中遇到的难点**

在这个项目中，最核心的难点确实是色域映射策略的设计。如何把标准环境下的色彩尽可能保持不变的给映射到目标色域中去。

在这个过程中，我们尝试了多种方案，比如最小色差裁剪

考虑到人眼对亮度对比度的变化非常敏感，同时对**色调（Hue）**的偏移容忍度很低。

这里的策略是分两步走： 第一，我们没有保持亮度恒定，而是设计了一个 S型查找表（S-LUT） 对亮度进行非线性映射，这样能更好地保留高光和暗部的对比度细节 。 第二，在保持色调角（Hue Angle）不变的前提下 ，朝着亮度轴上的中心点进行分段压缩。

这样做的结果是，既保证了颜色不偏色（色调不变），又解决了高亮环境下人眼对画面‘生动性’感知的需求。

---

**面试官：介绍一下你知道的白平衡算法**

白平衡算法的目的是估计场景的光源颜色，并通过调整 RGB 通道的增益，使图像整体看起来色温正确、无偏色。

常见的两种经典算法是灰度世界法和完美反射法：
- **灰度世界法**假设整幅图像的平均颜色是中性灰，通过计算 R、G、B 通道的均值来估计光源偏色，然后反向调整，使平均值回到中性。 
- 缺点是如果图像中大面积是单一色，比如蓝天或绿色草地，会导致估计不准。
- 另一种是**完美反射法**，假设场景中最亮的像素就是光源颜色。一般通过计算 RGB 最大值后，将其归一化为白点。
- 缺点是当最亮物体本身有色彩时，会造成偏差。

改进版本：

1. 加权灰度世界法 (Weighted Gray World)： 对“灰度世界法”的改进。它认为不是所有像素都同等重要，饱和度越低（越接近灰色）的像素，应该给予越高的权重。
2. Patch完美反射法”是“完美反射法”的一种改进算法。它不再是简单地寻找R, G, B三个通道的各自最大值，而是先找出图像中“最亮的一个小区域（Patch）”（例如亮度排名前1%的像素），然后计算这个区域内所有像素的R, G, B平均值，并以此作为光源颜色来校正图像。一句话总结：**它用“最亮区域的平均值”替代了“最亮的单个值”，大大提高了算法对噪点和彩色高光的抵抗能力，结果更稳定。**


**面试官：** “好的，我对你的情况基本了解了...最后，你有什么想问的

日常任务一般是什么

后续的面试流程，大概还会有几轮