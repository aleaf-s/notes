---
layout: post
title: "豪威面经"
date: 2025-09-12
category: 秋招
---

**目录**
- [提问](#提问)
- [回答](#回答)
  - [问题1：raw图如何存储](#问题1raw图如何存储)
  - [问题2：isp pipeline有哪些模块，其中dpc、lsc用的什么方法，gamma矫正参数怎么调的](#问题2isp-pipeline有哪些模块其中dpclsc用的什么方法gamma矫正参数怎么调的)
  - [问题3：说一个数字图像处理中熟悉的图像算法。中值滤波如何实现，还有哪些滤波方法，双边滤波的原理](#问题3说一个数字图像处理中熟悉的图像算法中值滤波如何实现还有哪些滤波方法双边滤波的原理)


> 找自小红书

## 提问

豪威没发笔试直接电话面试，全程无手撕，拷打项目和实习，问了传统图像算法，下面是面经
	

面试官上来先介绍了公司和部门的业务：sensor端算法、pipeline评估；cmodel效果和功能测试、芯片验证；图像质量相关指标的研究。问我需不需要展开讲
- 自我介绍
- 问毕设：raw图如何存储的，光场相机如何标定。看我用了isp，问isp pipeline有哪些模块，其中dpc、lsc用的什么方法，gamma矫正参数怎么调的。问光场重聚焦如何实现，拓展讲了一堆光场技术balabala
- 说一个数字图像处理中熟悉的图像算法。中值滤波如何实现，还有哪些滤波方法，双边滤波的原理
- 问jg项目：负责了哪些部分，其中的图像处理流程是怎样的，如何优化算法
- 问实习：了解sensor的哪些知识，答了用到的通信协议和sensor常见参数，提了一嘴pd像素，于是追问其作用以及pdaf如何实现


反问环节
- 面试流程：两轮技术面，一轮经理面，可能最后有笔试
- 没笔试意味着对编程要求不高吗：有要求，常用c/python。追问使用场景：python写自动化测试工具，c写cmodel
- 算法、软件/驱动开发、调试之间的区别
- 如何评估图像质量
- 该岗位的前景以及被ai替代的可能性

## 回答
### 问题1：raw图如何存储

1.raw图存储格式一般是bayer pattern，2. 此时存储的是经过光电转换后得到的数据，还经过处理。3. 还会包括一些额外元数据比如光圈大小、ISO、快门速度等信息

### 问题2：isp pipeline有哪些模块，其中dpc、lsc用的什么方法，gamma矫正参数怎么调的

面试官您好，关于您提的这个问题，我将核心要点进行说明。

首先，ISP Pipeline的主要模块可以分为三大块：

RAW域处理： 核心是在去马赛克之前，对原始数据进行修正。主要包括黑电平校正 (BLC)、坏点校正 (DPC) 和 镜头阴影校正 (LSC)。

RGB域处理： 在去马赛克 (Demosaic) 将图像转为RGB后，进行色彩和色调的调整。核心是白平衡校正、色彩校正矩阵 (CCM) 和 Gamma校正。

YUV域处理： 将图像转换到YUV空间，主要做一些细节和风格处理，比如锐化 (Sharpening)、降噪 (Denoise) 和对比度调整。

其次，关于您重点提到的 DPC 和 LSC 的方法：

DPC (坏点校正):

静态DPC： 通过出厂前的标定，生成一张固定的“坏点地图”。处理时，直接按图索骥，用周围像素的中值或均值替换坏点。优点是精准且快速。

动态DPC： 实时检测。通过比较一个像素与它邻域像素的差异，如果差异超过阈值，就判断为坏点并进行插值修复。优点是能去除随机产生的噪点。实际项目中，通常是两者结合使用。

LSC (镜头阴影校正):

核心方法是增益补偿。通过拍摄均匀的灰板或白板，得到一张有“暗角”的图像。然后以画面中心亮度为基准，计算出一个增益图 (Gain Map)。这张图中心区域的增益接近1，越往边缘越大。在处理图像时，将这张增益图乘上去，就把边缘的亮度“抬”起来了，实现整个画面亮度均匀。

最后，关于 Gamma校正参数的调试：

Gamma调试的核心不是调整一个单一数值，而是调整一条Gamma曲线，它以LUT（查找表）的形式存在。

调试方法是：

目标： Gamma曲线主要有两个目的，一是补偿人眼和显示器的非线性，二是调整图像的对比度和风格。

工具： 我们会在一个校准过的专业监视器上，观察标准的灰阶测试卡。

手法： 通过拉动曲线上的关键点来调整。简单来说：

拉高曲线前半段：可以提亮暗部细节。

改变曲线中段的斜率：可以调整画面的整体对比度。

压低曲线后半段：可以防止高光部分过曝，保留更多高光细节。

最终，我们会根据不同场景（如低光、逆光、人像等）来优化和选择最合适的Gamma曲线，以达到产品预期的图像风格。

### 问题3：说一个数字图像处理中熟悉的图像算法。中值滤波如何实现，还有哪些滤波方法，双边滤波的原理

好的，面试官您好。

对于数字图像处理算法，我比较熟悉的是**中值滤波**，这是一个非常经典的非线性滤波算法。

---

**中值滤波的实现**

它的实现原理很简单，核心思想就是用一个像素邻域内的**中值**来代替该像素的值。具体步骤如下：

1.  首先，定义一个奇数尺寸的**滑动窗口**，比如3x3或5x5。
2.  然后，将这个窗口在图像上从左到右、从上到下滑动，遍历每一个像素。
3.  在每一个位置，提取窗口内所有像素的灰度值，并将这些值进行**排序**。
4.  最后，取出排序后位于**最中间的那个值（中值）**，用它来**替换**窗口中心像素原来的值。

这个算法对**椒盐噪声**（图像中随机的黑白噪点）的抑制效果特别好，而且相比均值滤波，它能更好地保护图像的**边缘细节**。

---

**其他的滤波方法**

除了中值滤波，常见的滤波方法还有：

1.  **均值滤波 (Mean Filter):** 这是一种线性滤波，它用邻域内所有像素的**平均值**来替换中心像素。它的优点是速度快，但缺点是会使图像边缘变得模糊。
2.  **高斯滤波 (Gaussian Filter):** 这也是一种线性滤波，可以看作是均值滤波的升级版。它计算邻域像素的**加权平均**，权重遵循高斯分布，即离中心越近的像素权重越高。这使得它产生的模糊效果更平滑、更自然。
3.  **双边滤波 (Bilateral Filter):** 这是一种高级的非线性滤波，也是我接下来要介绍的。

---

**双边滤波的原理**

双边滤波之所以强大，是因为它是一种**保边降噪 (Edge-Preserving)** 的滤波器。

普通的高斯滤波只考虑了像素间的**空间距离**，所以它在平滑噪声的同时，也会把边缘模糊掉。

而双边滤波巧妙地结合了两个维度的信息：

1.  **空间域 (Spatial Domain):** 和高斯滤波一样，它会给**空间距离**越近的像素越高的权重。
2.  **值域 (Range Domain):** 这是它的精髓。它还会给与中心像素**灰度值**越相似的像素越高的权重。

在计算一个像素的最终值时，它邻域内某个像素的**总权重**，是它的**“空间权重”**和**“值域权重”**的**乘积**。

这会带来一个关键效果：

* **在平滑区域：** 邻域像素和中心点的值很接近，值域权重很高，所以双边滤波就等同于高斯滤波，正常地进行降噪。
* **在边缘区域：** 边缘另一侧的像素，虽然离中心点很近（空间权重高），但灰度值差异巨大（值域权重会变得极低）。这导致它的总权重非常低，在计算平均值时几乎不起作用。

**简单来说，双边滤波通过同时考量“距离远近”和“长得像不像”，实现了在平滑区域内降噪，同时在边缘区域“刹车”，从而保护了图像的清晰轮廓。**

以上是我的回答。

> 滤波就是通过一种数学运算，来筛选出我们感兴趣的特征，同时抑制或去除我们不感兴趣的特征。
